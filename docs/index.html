<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shibaâ€™s Park Quest â‹†.à³ƒà¿”*:ï½¥</title>
  <style>
    body {
      margin: 0;
      font-family: "Comic Sans MS", sans-serif;
      background: linear-gradient(#fffbe9, #ffe9f0);
      text-align: center;
      overflow-x: hidden;
    }
    h1 {
      color: #ff914d;
      margin: 0.5em 0 0.2em;
      font-size: 2em;
    }
    .banner {
      font-size: 1em;
      color: #444;
      margin-bottom: 1em;
    }
    #menu-container {
      padding: 2em;
    }
    .tile {
      width: 60px;
      height: 60px;
      border: 2px solid #ccc;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      font-size: 0.7em;
      background-color: white;
      transition: 0.2s ease;
    }
    .tile.active {
      background-color: #fbe8c9;
      box-shadow: 0 0 10px #ffcf91;
    }
    .special {
      font-size: 0.6em;
      margin-top: 2px;
    }
    #board {
      display: none;
      grid-template-columns: repeat(10, 60px);
      gap: 6px;
      justify-content: center;
      margin: 1em auto;
    }
    #message {
      margin: 1em auto;
      font-size: 1em;
      min-height: 2em;
    }
    #controls {
      display: none;
      margin-bottom: 2em;
    }
    button {
      background-color: #ff914d;
      color: white;
      font-size: 1em;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      margin: 0.5em;
      cursor: pointer;
    }
    button:hover {
      background-color: #ff6a00;
    }
    #volume-slider {
      width: 150px;
    }
  </style>
</head>
<body onmousedown="unlockAudio()">
  <div id="menu-container">
    <h1>ğŸ• Shibaâ€™s Park Quest â‹†.à³ƒà¿”*:ï½¥</h1>
    <div class="banner">ğŸ‚ Happy Birthday, Dad! ğœ—ğœš</div>
    <p>Select number of players:</p>
    <button onclick="startGame(1)">1 Player</button>
    <button onclick="startGame(2)">2 Players</button>
    <br><br>
    <button onclick="toggleMusic()" id="mute-button">ğŸ”‡ Mute Music</button>
    <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.5" oninput="adjustVolume()" />
  </div>

  <div id="board"></div>
  <div id="message"></div>
  <div id="controls">
    <button onclick="rollDice()">ğŸ² Roll Dice</button>
    <button onclick="restartGame()">ğŸ” Restart</button>
  </div>

  <!-- SOUNDS -->
  <audio id="roll-sound" src="https://assets.mixkit.co/sfx/download/mixkit-fast-small-sweep-transition-166.wav"></audio>
  <audio id="win-sound" src="https://assets.mixkit.co/sfx/download/mixkit-bonus-earned-in-video-game-2058.wav"></audio>
  <audio id="tile-sound" src="https://assets.mixkit.co/sfx/download/mixkit-arcade-bonus-alert-767.wav"></audio>
  <audio id="menu-music" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_39abf3aa74.mp3?filename=lofi-study-112191.mp3" loop autoplay></audio>

  <script>
    const BOARD_SIZE = 10;
    const TOTAL_TILES = BOARD_SIZE * BOARD_SIZE;
    let positions = [];
    let currentPlayer = 0;
    let skipTurns = [];
    let numPlayers = 1;
    let isMuted = false;

    const TILE_EFFECTS = {
      4: "ğŸ– Snack! Forward 2 tiles",
      8: "ğŸ’¦ Mud puddle! Go back 1 tile",
      13: "ğŸ¦‹ Distracted! Skip next turn",
      19: "ğŸ¿ï¸ Squirrel! Forward 3 tiles",
      23: "âœ¨ Magic tile! Go to end",
      31: "ğŸªµ Tripped! Go back 2 tiles",
      44: "ğŸ© Treat stash! Forward 4 tiles",
      56: "ğŸ¾ Found a friend! Skip forward 1 tile",
      72: "ğŸª™ Lost a toy! Go back 3 tiles",
      88: "ğŸš« Fence! Skip next turn",
      95: "ğŸŒŸ Zoomies! Forward 5 tiles"
    };

    const board = document.getElementById("board");
    const message = document.getElementById("message");
    const menuContainer = document.getElementById("menu-container");
    const controls = document.getElementById("controls");
    const rollSound = document.getElementById("roll-sound");
    const winSound = document.getElementById("win-sound");
    const tileSound = document.getElementById("tile-sound");
    const menuMusic = document.getElementById("menu-music");

    function unlockAudio() {
      menuMusic.play().catch(() => {});
    }

    function toggleMusic() {
      isMuted = !isMuted;
      menuMusic.muted = isMuted;
      document.getElementById("mute-button").textContent = isMuted ? "ğŸ”ˆ Unmute Music" : "ğŸ”‡ Mute Music";
    }

    function adjustVolume() {
      const volume = document.getElementById("volume-slider").value;
      menuMusic.volume = volume;
    }

    function drawBoard() {
      board.innerHTML = "";
      for (let i = 0; i < TOTAL_TILES; i++) {
        const tile = document.createElement("div");
        tile.className = "tile";

        if (positions.includes(i)) {
          tile.classList.add("active");
        }

        tile.innerHTML = `<div>${i + 1}</div>`;
        if (TILE_EFFECTS[i]) {
          const effect = document.createElement("div");
          effect.className = "special";
          effect.textContent = TILE_EFFECTS[i];
          tile.appendChild(effect);
        }

        positions.forEach((pos, index) => {
          if (pos === i) {
            const icon = document.createElement("div");
            icon.className = "player";
            icon.textContent = index === 0 ? "ğŸ•" : "ğŸ©";
            tile.appendChild(icon);
          }
        });

        board.appendChild(tile);
      }
    }

    function startGame(players) {
      numPlayers = players;
      positions = new Array(players).fill(0);
      skipTurns = new Array(players).fill(false);
      currentPlayer = 0;
      menuContainer.style.display = "none";
      board.style.display = "grid";
      controls.style.display = "block";
      message.textContent = `Player ${currentPlayer + 1}, it's your turn!`;
      drawBoard();
    }

    function rollDice() {
      rollSound.play();
      if (skipTurns[currentPlayer]) {
        message.textContent = `Player ${currentPlayer + 1} was distracted! Turn skipped. ğŸ¦‹`;
        skipTurns[currentPlayer] = false;
        nextPlayer();
        return;
      }

      const roll = Math.floor(Math.random() * 6) + 1;
      message.textContent = `Player ${currentPlayer + 1} rolled a ${roll}!`;

      let pos = positions[currentPlayer] + roll;
      if (pos >= TOTAL_TILES - 1) pos = TOTAL_TILES - 1;

      if (TILE_EFFECTS[pos]) {
        tileSound.play();
        const effect = TILE_EFFECTS[pos];
        message.textContent += ` ${effect}`;
        if (effect.includes("Forward 2")) pos = Math.min(pos + 2, TOTAL_TILES - 1);
        if (effect.includes("Forward 3")) pos = Math.min(pos + 3, TOTAL_TILES - 1);
        if (effect.includes("Forward 4")) pos = Math.min(pos + 4, TOTAL_TILES - 1);
        if (effect.includes("Forward 5")) pos = Math.min(pos + 5, TOTAL_TILES - 1);
        if (effect.includes("Go back 1")) pos = Math.max(pos - 1, 0);
        if (effect.includes("Go back 2")) pos = Math.max(pos - 2, 0);
        if (effect.includes("Go back 3")) pos = Math.max(pos - 3, 0);
        if (effect.includes("Skip")) skipTurns[currentPlayer] = true;
        if (effect.includes("Go to end")) pos = TOTAL_TILES - 1;
      }

      positions[currentPlayer] = pos;
      drawBoard();

      if (pos === TOTAL_TILES - 1) {
        winSound.play();
        message.textContent = `ğŸ‰ Player ${currentPlayer + 1} reached the park and wins! ğŸ¶`;
        controls.style.display = "none";
        return;
      }

      nextPlayer();
    }

    function nextPlayer() {
      currentPlayer = (currentPlayer + 1) % numPlayers;
      message.textContent += `\nPlayer ${currentPlayer + 1}, it's your turn!`;
    }

    function restartGame() {
      location.reload();
    }
  </script>
</body>
</html>
