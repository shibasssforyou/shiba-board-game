<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ• Shibaâ€™s Park Quest â‹†.à³ƒà¿”*:ï½¥</title>
  <style>
    body {
      margin: 0;
      font-family: "Comic Sans MS", cursive, sans-serif;
      background: linear-gradient(to bottom right, #fff5e1, #ffe5f0);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: start;
      min-height: 100vh;
    }

    h1 {
      color: #ff914d;
      font-size: 2.5em;
      margin: 0.5em 0 0.2em;
    }

    .banner {
      font-size: 1.2em;
      margin-bottom: 1em;
    }

    #menu-container {
      text-align: center;
      margin-top: 4em;
    }

    #board {
      display: none;
      grid-template-columns: repeat(10, 50px);
      gap: 6px;
      margin-top: 2em;
    }

    .tile {
      background: white;
      border: 2px solid #ccc;
      width: 50px;
      height: 50px;
      text-align: center;
      font-size: 12px;
      position: relative;
      transition: background 0.3s;
    }

    .tile.active {
      background: #fbeacc;
      box-shadow: 0 0 6px #ffd699;
    }

    .special {
      font-size: 10px;
      position: absolute;
      bottom: 2px;
      left: 2px;
      right: 2px;
    }

    .player {
      font-size: 20px;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
    }

    .paw {
      font-size: 16px;
      position: absolute;
      top: 16px;
      animation: fadeOut 2s forwards;
    }

    @keyframes fadeOut {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }

    .button {
      background: #ff914d;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 6px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1em;
    }

    #controls {
      margin-top: 1em;
      display: none;
      text-align: center;
    }

    #message {
      margin: 1em;
      font-size: 1.1em;
    }

    #volume-slider {
      width: 150px;
    }
  </style>
</head>
<body>
  <h1>ğŸ• Shibaâ€™s Park Quest â‹†.à³ƒà¿”*:ï½¥</h1>
  <div class="banner">ğŸ‚ Happy Birthday, Dad! ğœ—ğœš</div>

  <div id="menu-container">
    <p>Select number of players:</p>
    <button class="button" onclick="startGame(1)">1 Player</button>
    <button class="button" onclick="startGame(2)">2 Players</button>
    <br/>
    <button class="button" onclick="toggleMusic()" id="mute-button">ğŸ”‡ Mute Music</button>
    <input type="range" id="volume-slider" min="0" max="1" step="0.01" onchange="adjustVolume()" value="0.5" />
  </div>

  <div id="board"></div>

  <div id="controls">
    <div id="message"></div>
    <button class="button" onclick="rollDice()">ğŸ² Roll Dice</button>
    <button class="button" onclick="restartGame()">ğŸ” Replay</button>
    <button class="button" onclick="location.reload()">ğŸ  Main Menu</button>
  </div>

  <audio id="menu-music" src="https://cdn.pixabay.com/audio/2022/03/16/audio_a71bb6c7f4.mp3" loop autoplay></audio>
  <audio id="roll-sound" src="https://cdn.pixabay.com/audio/2022/03/02/audio_d0f7c208d7.mp3"></audio>
  <audio id="win-sound" src="https://cdn.pixabay.com/audio/2021/08/04/audio_881f2e31a0.mp3"></audio>
  <audio id="tile-sound" src="https://cdn.pixabay.com/audio/2022/10/26/audio_3e72b2cbb4.mp3"></audio>

  <script>
    const BOARD_SIZE = 10;
    const TOTAL_TILES = BOARD_SIZE * BOARD_SIZE;
    let positions = [];
    let currentPlayer = 0;
    let skipTurns = [];
    let numPlayers = 1;
    let isMuted = false;

    const TILE_EFFECTS = {
      4: "ğŸ– Snack! Forward 2 tiles",
      8: "ğŸ’¦ Mud puddle! Go back 1 tile",
      13: "ğŸ¦‹ Distracted! Skip next turn",
      19: "ğŸ¿ï¸ Squirrel! Forward 3 tiles",
      23: "âœ¨ Magic tile! Go to end",
      31: "ğŸªµ Tripped! Go back 2 tiles",
      44: "ğŸ© Treat stash! Forward 4 tiles",
      56: "ğŸ¾ Found a friend! Skip forward 1 tile",
      72: "ğŸª™ Lost a toy! Go back 3 tiles",
      88: "ğŸš« Fence! Skip next turn",
      95: "ğŸŒŸ Zoomies! Forward 5 tiles"
    };

    const board = document.getElementById("board");
    const message = document.getElementById("message");
    const menuContainer = document.getElementById("menu-container");
    const controls = document.getElementById("controls");

    const rollSound = document.getElementById("roll-sound");
    const winSound = document.getElementById("win-sound");
    const tileSound = document.getElementById("tile-sound");
    const menuMusic = document.getElementById("menu-music");

    function toggleMusic() {
      isMuted = !isMuted;
      menuMusic.muted = isMuted;
      document.getElementById("mute-button").textContent = isMuted ? "ğŸ”ˆ Unmute Music" : "ğŸ”‡ Mute Music";
    }

    function adjustVolume() {
      const volume = document.getElementById("volume-slider").value;
      menuMusic.volume = volume;
    }

    function drawBoard() {
      board.innerHTML = "";
      for (let i = 0; i < TOTAL_TILES; i++) {
        const tile = document.createElement("div");
        tile.className = "tile";
        tile.innerHTML = `<div>${i + 1}</div>`;

        if (TILE_EFFECTS[i]) {
          const effect = document.createElement("div");
          effect.className = "special";
          effect.textContent = TILE_EFFECTS[i];
          tile.appendChild(effect);
        }

        positions.forEach((pos, index) => {
          if (pos === i) {
            tile.classList.add("active");
            const icon = document.createElement("div");
            icon.className = "player";
            icon.textContent = index === 0 ? "ğŸ•" : "ğŸ©";
            tile.appendChild(icon);
          }
        });

        board.appendChild(tile);
      }
    }

    function startGame(players) {
      numPlayers = players;
      positions = new Array(players).fill(0);
      skipTurns = new Array(players).fill(false);
      currentPlayer = 0;
      menuContainer.style.display = "none";
      board.style.display = "grid";
      controls.style.display = "block";
      drawBoard();
      message.textContent = `Player ${currentPlayer + 1}, it's your turn!`;
    }

    function rollDice() {
      if (!isMuted) rollSound.play();

      if (skipTurns[currentPlayer]) {
        message.textContent = `Player ${currentPlayer + 1} was distracted! Turn skipped. ğŸ¦‹`;
        skipTurns[currentPlayer] = false;
        nextPlayer();
        return;
      }

      const roll = Math.floor(Math.random() * 6) + 1;
      message.textContent = `Player ${currentPlayer + 1} rolled a ${roll}!`;

      let start = positions[currentPlayer];
      let end = Math.min(start + roll, TOTAL_TILES - 1);

      animateMove(start, end, () => {
        let effect = TILE_EFFECTS[end];
        if (effect) {
          if (!isMuted) tileSound.play();
          message.textContent += ` ${effect}`;
          if (effect.includes("Forward 2")) end = Math.min(end + 2, TOTAL_TILES - 1);
          if (effect.includes("Forward 3")) end = Math.min(end + 3, TOTAL_TILES - 1);
          if (effect.includes("Forward 4")) end = Math.min(end + 4, TOTAL_TILES - 1);
          if (effect.includes("Forward 5")) end = Math.min(end + 5, TOTAL_TILES - 1);
          if (effect.includes("Go back 1")) end = Math.max(end - 1, 0);
          if (effect.includes("Go back 2")) end = Math.max(end - 2, 0);
          if (effect.includes("Go back 3")) end = Math.max(end - 3, 0);
          if (effect.includes("Skip")) skipTurns[currentPlayer] = true;
          if (effect.includes("Go to end")) end = TOTAL_TILES - 1;
        }

        positions[currentPlayer] = end;
        drawBoard();

        if (end === TOTAL_TILES - 1) {
          if (!isMuted) winSound.play();
          message.textContent = `ğŸ‰ Player ${currentPlayer + 1} reached the park and wins! ğŸ¶`;
          controls.style.display = "block";
        } else {
          nextPlayer();
        }
      });
    }

    function animateMove(start, end, callback) {
      let step = start;
      const interval = setInterval(() => {
        if (step < end) step++;
        else if (step > end) step--;
        else {
          clearInterval(interval);
          callback();
          return;
        }

        positions[currentPlayer] = step;
        drawBoard();
        const tile = board.children[step];
        const paw = document.createElement("div");
        paw.className = "paw";
        paw.textContent = "ğŸ¾";
        tile.appendChild(paw);
      }, 300);
    }

    function nextPlayer() {
      currentPlayer = (currentPlayer + 1) % numPlayers;
      message.textContent += `\nPlayer ${currentPlayer + 1}, it's your turn!`;
    }

    function restartGame() {
      startGame(numPlayers);
    }
  </script>
</body>
</html>
